<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src\Moan.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">src/</a> Moan.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>90/90</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>20/20</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>15/15</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>89/89</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">85×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">42×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">42×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24×</span>
<span class="cline-any cline-yes">24×</span>
<span class="cline-any cline-yes">20×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24×</span>
<span class="cline-any cline-yes">24×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">38×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">37×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">37×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">36×</span>
<span class="cline-any cline-yes">32×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">27×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">27×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">9×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">37×</span>
<span class="cline-any cline-yes">40×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">38×</span>
<span class="cline-any cline-yes">38×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">50×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">27×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span></td><td class="text"><pre class="prettyprint lang-js">/*
 * moan
 * https://github.com/neocotic/moan
 *
 * Copyright (c) 2015 Alasdair Mercer
 * Licensed under the MIT license.
 * https://github.com/neocotic/moan/blob/master/LICENSE.md
 */
&nbsp;
'use strict'
&nbsp;
const EventEmitter = require('events').EventEmitter
const findup = require('findup-sync')
const fs = require('fs')
&nbsp;
const FileSet = require('./FileSet')
const Logger = require('./Logger')
const Task = require('./Task')
const Utils = require('./Utils')
&nbsp;
const cachedVersionSymbol = Symbol('cachedVersion')
const configsSymbol = Symbol('configs')
const fileSetsSymbol = Symbol('fileSets')
const getFileSetSymbol = Symbol('getFileSet')
const getTaskSymbol = Symbol('getTask')
const runTaskSymbol = Symbol('runTask')
const runTasksSymbol = Symbol('runTasks')
const taskStackSymbol = Symbol('taskStack')
const tasksSymbol = Symbol('tasks')
&nbsp;
/**
 * A moaning task manager which can't help but register and run any task that your heart desires, although expect it to
 * moan about it.
 *
 * @access public
 */
class Moan extends EventEmitter {
&nbsp;
  /**
   * Creates a new instance of {@link Moan} with no registered tasks.
   *
   * @param {MaonOptions} [options] - the options for the {@link Moan}
   * @access public
   */
  constructor(options) {
    super()
&nbsp;
    options = Object.assign({}, Moan.defaults, options)
&nbsp;
    /**
     * Whether the {@link Logger} should use colors.
     *
     * @access public
     * @type {boolean}
     */
    this.color = !!options.color
&nbsp;
    /**
     * A map of shared configurations.
     *
     * @access private
     * @type {Map&lt;string, *}
     */
    this[configsSymbol] = new Map()
&nbsp;
    /**
     * Whether {@link Logger#debug} should output.
     *
     * @access public
     * @type {boolean}
     */
    this.debug = !!options.debug
&nbsp;
    /**
     * A map of {@link FileSet} IDs and their registered instance.
     *
     * @access private
     * @type {Map&lt;string, FileSet&gt;}
     */
    this[fileSetsSymbol] = new Map()
&nbsp;
    /**
     * Whether tasks should be forced to execute even after errors.
     *
     * @access public
     * @type {boolean}
     */
    this.force = !!options.force
&nbsp;
    /**
     * The logger for this {@link Moan} instance.
     *
     * @access public
     * @type {Logger}
     */
    this.log = new Logger(this)
&nbsp;
    /**
     * The current stack of tasks being executed.
     *
     * @access private
     * @type {string[]}
     */
    this[taskStackSymbol] = []
&nbsp;
    /**
     * A map of {@link Task} names and their registered instance.
     *
     * @access private
     * @type {Map&lt;string, Task&gt;}
     */
    this[tasksSymbol] = new Map()
  }
&nbsp;
  /**
   * Returns the shared configuration with the &lt;code&gt;key&lt;/code&gt; provided.
   *
   * If a &lt;code&gt;value&lt;/code&gt; is also provided, it will be assigned to the configuration with for &lt;code&gt;key&lt;/code&gt;.
   *
   * This is especially useful when breaking tasks down into separate files as it allows any kind of configurations to
   * be shared between them.
   *
   * @example
   * moan.config('version', require('./package.json').version)
   *
   * moan.task('deploy', () =&gt; {
   *   return paas.deploy(version)
   * })
   * @param {string} key - the key of the configuration to be returned or have its &lt;code&gt;value&lt;/code&gt; assigned
   * @param {*} [value] - the value to be assigned to the configuration with the &lt;code&gt;key&lt;/code&gt; provided
   * @return {*} The value of the configuration with the given &lt;code&gt;key&lt;/code&gt;.
   * @access public
   */
  config(key, value) {
    if (arguments.length === 1) {
      return this[configsSymbol].get(key)
    }
&nbsp;
    this.log.debug(`Setting the configuration "${key}": ${value}`)
&nbsp;
    this[configsSymbol].set(key, value)
&nbsp;
    return value
  }
&nbsp;
  /**
   * An array of shared configuration keys in the order in which they were configured and will be empty if none exist.
   *
   * @example
   * moan.config('username', process.env.USER || process.env.USERNAME)
   * moan.config('version', require('./package.json').version)
   *
   * moan.configs
   * //=&gt; [ "username", "version" ]
   * @access public
   * @type {string[]}
   */
  get configs() {
    return Array.from(this[configsSymbol].keys())
  }
&nbsp;
  /**
   * The name of the task currently being executed.
   *
   * @access public
   * @type {string}
   */
  get currentTask() {
    return this[taskStackSymbol][this[taskStackSymbol].length - 1]
  }
&nbsp;
  /**
   * Returns the {@link FileSet} for the specified &lt;code&gt;id&lt;/code&gt;.
   *
   * If either &lt;code&gt;patterns&lt;/code&gt; or &lt;code&gt;options&lt;/code&gt; are provided, a new {@link FileSet} will be created and
   * associated with the given &lt;code&gt;id&lt;/code&gt;. Otherwise, this method will simply attempt to return a previously
   * associated {@link FileSet} and throw an error if it's unable to do set.
   *
   * This is useful for defining sets of files once and then simply referencing elsewhere within your tasks.
   *
   * It's important to note that, while you can extend the returned file set using {@link FileSet#expand}, the original
   * {@link FileSet} is unchanged and the new one will not be registered.
   *
   * @example &lt;caption&gt;Manage source files and compilation output directory using glob patterns&lt;/caption&gt;
   * moan.fileSet('output', 'lib/')
   * moan.fileSet('sources', 'src/*.coffee')
   *
   * moan.task('clean', () =&gt; {
   *   return moan.fileSet('output')
   *     .del()
   * })
   *
   * moan.task('compile', 'clean', () =&gt; {
   *   return moan.fileSet('sources')
   *     .get()
   *     .then((sourceFiles) =&gt; {
   *       ...
   *     })
   * })
   * @example &lt;caption&gt;Pass glob options for more control&lt;/caption&gt;
   * moan.fileSet('images', [ 'public/favicon.ico' 'public/img/*.{gif,jp?(e)g,png}' ], { nocase: true })
   * @param {string} id - the ID of either the existing {@link FileSet} to be returned (if only the &lt;code&gt;id&lt;/code&gt; is
   * provided) or to be associated with the {@link FileSet} that is to be created based on the given
   * &lt;code&gt;patterns&lt;/code&gt; and glob &lt;code&gt;options&lt;/code&gt;
   * @param {string|string[]} [patterns=[]] - the glob pattern(s) to be used by the created {@link FileSet}
   * @param {Object} [options={}] - the glob options to be used by the created {@link FileSet}
   * @return {FileSet} The {@link FileSet} associated with the given &lt;code&gt;id&lt;/code&gt;, which may just have been
   * registered/re-registered if either &lt;code&gt;patterns&lt;/code&gt; or &lt;code&gt;options&lt;/code&gt; were also specified.
   * @throws {Error} If only &lt;code&gt;id&lt;/code&gt; is provied but no {@link FileSet} could be found for it.
   * @access public
   */
  fileSet(id, patterns, options) {
    if (arguments.length === 1) {
      return this[getFileSetSymbol](id)
    }
&nbsp;
    let fileSet = new FileSet(patterns, options)
&nbsp;
    this.log.debug(`Registering file set with ID "${id}" for patterns: ${fileSet.patterns}`)
&nbsp;
    this[fileSetsSymbol].set(id, fileSet)
&nbsp;
    return fileSet
  }
&nbsp;
  /**
   * An array of registered file set IDs in the order in which they were registered and will be empty if none exist.
   *
   * @example
   * moan.fileSet('docs', 'docs/')
   * moan.fileSet('sources', [ 'public/js/*.js', 'lib/*.js' ])
   * moan.fileSet('tests', [ 'test/*-test.js', 'spec/*.spec.js' ])
   *
   * moan.fileSets
   * //=&gt; [ "docs", "sources", "tests" ]
   * @access public
   * @type {string[]}
   */
  get fileSets() {
    return Array.from(this[fileSetsSymbol].keys())
  }
&nbsp;
  /**
   * Returns the {@link FileSet} with the specified &lt;code&gt;id&lt;/code&gt; or throws an error if none could be found.
   *
   * @param {string} id - the ID of the {@link FileSet} to be returned
   * @return {FileSet} The {@link FileSet} with the given &lt;code&gt;id&lt;/code&gt;.
   * @throws {Error} If no {@link FileSet} can be found for the given &lt;code&gt;id&lt;/code&gt;.
   * @access private
   */
  [getFileSetSymbol](id) {
    let fileSet = this[fileSetsSymbol].get(id)
    if (!fileSet) {
      throw new Error(`Could not find file set: ${id}`)
    }
&nbsp;
    return fileSet
  }
&nbsp;
  /**
   * Returns the {@link Task} with the specified &lt;code&gt;name&lt;/code&gt; or throws an error if none could be found.
   *
   * @param {string} name - the name of the {@link Task} to be returned
   * @return {Task} The {@link Task} with the given &lt;code&gt;name&lt;/code&gt;.
   * @throws {Error} If no {@link Task} can be found for the given &lt;code&gt;name&lt;/code&gt;.
   * @access private
   */
  [getTaskSymbol](name) {
    let task = this[tasksSymbol].get(name)
    if (!task) {
      throw new Error(`Could not find task: ${name}`)
    }
&nbsp;
    return task
  }
&nbsp;
  /**
   * Returns whether any registered {@link Task} has failed to run successfully.
   *
   * This method will return &lt;code&gt;false&lt;/code&gt; even if no tasks have been executed.
   *
   * @return {boolean} &lt;code&gt;true&lt;/code&gt; if at least one {@link Task} failed to completed; otherwise
   * &lt;code&gt;false&lt;/code&gt;.
   * @access private
   */
  hasFailures() {
    return Array.from(this[tasksSymbol].values()).some((task) =&gt; task.failed)
  }
&nbsp;
  /**
   * Runs all of the tasks with the given &lt;code&gt;names&lt;/code&gt;, returning a &lt;code&gt;Promise&lt;/code&gt; which will be fullfilled
   * once all of the tasks and their dependencies have been executed or rejected if any of the them fail to execute.
   *
   * The returned &lt;code&gt;Promise&lt;/code&gt; may also be rejected if a task could not be found for any of the given
   * &lt;code&gt;names&lt;/code&gt; or there is a cyclic dependency.
   *
   * @example
   * moan.task('build', [ 'compile', 'test' ])
   * moan.task('compile', () =&gt; { ... })
   * moan.task('lint', () =&gt; { ... })
   * moan.task('test', 'lint', () =&gt; { ... })
   *
   * moan.run('build')
   *   .then(() =&gt; { ... })
   *   .catch((error) =&gt; { ... })
   *
   * moan.run([ 'compile', 'test' ])
   *   .then(() =&gt; { ... })
   *   .catch((error) =&gt; { ... })
   * @param {string|string[]} [names] - the name or names of the tasks to be executed
   * @return {Promise} The &lt;code&gt;Promise&lt;/code&gt; to track progress of the all the task executions.
   * @access public
   */
  run(names) {
    names = Utils.asArray(names)
    if (names.length === 0) {
      names.push('default')
    }
&nbsp;
    this.log.debug(`Running tasks: ${names}`)
&nbsp;
    this[taskStackSymbol].splice(0, this[taskStackSymbol].length)
&nbsp;
    return Promise.resolve()
      .then(() =&gt; this[runTasksSymbol](names))
  }
&nbsp;
  /**
   * Executes the specified &lt;code&gt;task&lt;/code&gt; as well as all of its dependencies, where applicable.
   *
   * This method will throw an error if &lt;code&gt;task&lt;/code&gt; is already in the current stack. That is; either there is a
   * cyclic dependency (this &lt;code&gt;task&lt;/code&gt; depends on another which in turn depends on the &lt;code&gt;task&lt;/code&gt;) or
   * someone is attempting to run &lt;code&gt;task&lt;/code&gt; within the its own {@link taskRunnable}.
   *
   * @param {Task} task - the {@link Task} to be executed, but only after all of its dependencies
   * @return {Promise} The &lt;code&gt;Promise&lt;/code&gt; to track the task execution progress.
   * @throws {Error} If there is a cyclic dependency.
   * @access private
   */
  [runTaskSymbol](task) {
    if (this[taskStackSymbol].indexOf(task.name) &gt;= 0) {
      throw new Error(`Cyclic dependency found: ${task.name}`)
    }
&nbsp;
    this[taskStackSymbol].push(task.name)
&nbsp;
    let prerequisite = task.dependencies.length &gt; 0 ? this[runTasksSymbol](task.dependencies) : Promise.resolve()
&nbsp;
    return prerequisite
      .then(() =&gt; task.run())
      .then((result) =&gt; {
        this[taskStackSymbol].pop()
&nbsp;
        return result
      })
      .catch((error) =&gt; {
        if (!this.force) {
          throw error
        }
      })
  }
&nbsp;
  /**
   * Executes each {@link Task} in the list of &lt;code&gt;names&lt;/code&gt; provided.
   *
   * This method will throw an error if a {@link Task} could not be found in the list of &lt;code&gt;names&lt;/code&gt; or one of
   * the tasks is already in the current stack. That is; either there is a cyclic dependency (a {@link Task} depends on
   * another which in turn depends on the {@link Task}) or someone is attempting to run a {@link Task} within the its
   * own {@link taskRunnable}.
   *
   * The returned &lt;code&gt;Promise&lt;/code&gt; may be rejected if a task could not be found for any of the given
   * &lt;code&gt;names&lt;/code&gt; or there is a cyclic dependency.
   *
   * @param {string[]} names - the name of the tasks to be executed
   * @return {Promise} The &lt;code&gt;Promise&lt;/code&gt; to track progress of the all the task executions.
   * @access private
   */
  [runTasksSymbol](names) {
    return names
      .map((name) =&gt; this[getTaskSymbol](name))
      .reduce((promise, task) =&gt; {
        return promise
          .then(() =&gt; this[runTaskSymbol](task))
      }, Promise.resolve())
  }
&nbsp;
  /**
   * Registers a task with the specified &lt;code&gt;name&lt;/code&gt; and with any optional &lt;code&gt;dependencies&lt;/code&gt; provided or
   * simply returns the {@link Task} registered against the given &lt;code&gt;name&lt;/code&gt; if no other arguments are provided.
   *
   * The &lt;code&gt;runnable&lt;/code&gt; function will be invoked if/when this task is executed either directly or indirectly (as
   * a dependency itself) via {@link Moan#run}. A no-operation function will be used if &lt;code&gt;runnable&lt;/code&gt; is not
   * provided (or not a function).
   *
   * If &lt;code&gt;runnable&lt;/code&gt; declares any arguments, the first argument (i.e. &lt;code&gt;done&lt;/code&gt;) will be treated as a
   * callback function which &lt;b&gt;must&lt;/b&gt; be invoked to complete the task. This callback accepts two arguments itself
   * both of which are entirely optional and omitting them will simply complete the task without a result value. The
   * first is interpereted as an error which, when provided, will fail the task, and the second is an optional result
   * value for the task.
   *
   * However, the preferred approach to asynchronous tasks is to return a &lt;i&gt;thenable&lt;/i&gt; (e.g. &lt;code&gt;Promise&lt;/code&gt;).
   *
   * Obviously, these points only apply to asynchronous tasks and for synchronous tasks, simply don't declare any
   * arguments on &lt;code&gt;runable&lt;/code&gt; or have it return a &lt;i&gt;thenable&lt;/i&gt; (yuck!) object. Such tasks will simply
   * complete once the function has been invoked, and the return value will be used as the result value for the task.
   *
   * @example &lt;caption&gt;Register a synchronous task&lt;/caption&gt;
   * moan.task('compile', () =&gt; {
   *   let sourceFiles = glob.sync('src/*.coffee')
   *   let targetFiles = sourceFiles.map((sourceFile) =&gt; {
   *     let source = fs.readFileSync(sourceFile, { encoding: 'utf8' })
   *     let target = CoffeeScript.compile(source)
   *
   *     let targetFile = path.join('lib', path.basename(sourceFile))
   *
   *     fs.writeFileSync(targetFile, CoffeeScript.compile(source))
   *
   *     return targetFile
   *   })
   *
   *   return targetFiles
   * })
   * @example &lt;caption&gt;Register a asynchronous task with a single dependency&lt;/caption&gt;
   * moan.task('notify', 'deploy', () =&gt; {
   *   let options = {
   *     url: 'https://notify.example.com',
   *     formData: getDeployData()
   *   }
   *
   *   return new Promise((resolve, reject) =&gt; {
   *     request.post(options, (error, response, body) =&gt; {
   *       if (error) {
   *         reject(error)
   *       } else {
   *         resolve(body)
   *       }
   *     })
   *   })
   * })
   * @example &lt;caption&gt;Register a asynchronous task using a callback with multiple dependencies&lt;/caption&gt;
   * moan.task('notify-latest', [ 'update', 'deploy' ], (done) =&gt; {
   *   let options = {
   *     url: 'https://notify.example.com',
   *     formData: getDeployData()
   *   }
   *
   *   request.post(options, (error, response, body) =&gt; {
   *     if (error) {
   *       done(error)
   *     } else {
   *       done(null, body)
   *     }
   *   })
   * })
   * @example &lt;caption&gt;Register a task whose runnable function is loaded from another module&lt;/caption&gt;
   * moan.task('test', 'lint', require('./tasks/test'))
   * @param {string} name - the name of the task to be used
   * @param {string|string[]} [dependencies=[]] - a list of task names that the task depends on
   * @param {taskRunnable} [runnable] - the runnable function that performs the task operation
   * @return {Task} The {@link Task} associated with the given &lt;code&gt;name&lt;/code&gt;, which may just have been
   * registered/re-registered if either &lt;code&gt;dependencies&lt;/code&gt; or &lt;code&gt;runnable&lt;/code&gt; were also specified.
   * @throws {Error} If only &lt;code&gt;name&lt;/code&gt; is provied but no {@link Task} could be found for it.
   * @access public
   */
  task(name, dependencies, runnable) {
    if (arguments.length === 1) {
      return this[getTaskSymbol](name)
    }
&nbsp;
    let task = new Task(name, dependencies, runnable)
&nbsp;
    this.log.debug(`Registering task for name "${name}"`)
&nbsp;
    this[tasksSymbol].set(name, task)
&nbsp;
    task
      .on('done', (value) =&gt; {
        this.emit('done', name, value)
      })
      .on('error', (error) =&gt; {
        this.emit('error', name, error)
      })
      .on('start', () =&gt; {
        this.emit('start', name)
      })
&nbsp;
    return task
  }
&nbsp;
  /**
   * An array of registered task names in the order in which they were registered and will be empty if none exist.
   *
   * @example
   * moan.task('build', [ 'compile', 'test' ])
   * moan.task('compile', () =&gt; { ... })
   * moan.task('lint', () =&gt; { ... })
   * moan.task('test', 'lint', () =&gt; { ... })
   *
   * moan.tasks
   * //=&gt; [ "build", "compile", "lint", "test" ]
   * @access public
   * @type {string[]}
   */
  get tasks() {
    return Array.from(this[tasksSymbol].keys())
  }
&nbsp;
  /**
   * The current version of this module.
   *
   * @access public
   * @type {string}
   */
  get version() {
    /* eslint "no-sync": 0 */
    if (this[cachedVersionSymbol]) {
      return this[cachedVersionSymbol]
    }
&nbsp;
    let pkgFile = findup('package.json', { cwd: __dirname })
    let pkg = JSON.parse(fs.readFileSync(pkgFile, 'utf8'))
&nbsp;
    this[cachedVersionSymbol] = pkg.version
&nbsp;
    return this[cachedVersionSymbol]
  }
}
&nbsp;
/**
 * Options for the {@link Moan} constructor.
 *
 * @access public
 * @typedef {Object} MoanOptions
 * @property {boolean} [color=true] - &lt;code&gt;true&lt;/code&gt; to enable colors when logging; otherwise &lt;code&gt;false&lt;/code&gt;.
 * @property {boolean} [debug=false] - &lt;code&gt;true&lt;/code&gt; to enable debug-level logging; otherwise &lt;code&gt;false&lt;/code&gt;.
 * @property {boolean} [force=false] - &lt;code&gt;true&lt;/code&gt; to keep running tasks after errors; otherwise
 * &lt;code&gt;false&lt;/code&gt;.
 */
Moan.defaults = {
  color: true,
  debug: false,
  force: false
}
&nbsp;
module.exports = Moan</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Nov 07 2015 16:15:28 GMT+0000 (GMT Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
